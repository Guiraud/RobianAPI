# =============================================================================
# Configuration RobianAPI - Variables d'environnement
# =============================================================================

# Environnement (development, staging, production)
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# SERVEUR
# =============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=auto
RELOAD=false

# =============================================================================
# BASE DE DONNÉES POSTGRESQL
# =============================================================================
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=robian
POSTGRES_PASSWORD=robian_secret_change_in_production
POSTGRES_DB=robian_db

# Ou utiliser une URL complète
# DATABASE_URL=postgresql+asyncpg://robian:password@localhost:5432/robian_db

# Pool de connexions
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# REDIS CACHE
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Ou utiliser une URL complète
# REDIS_URL=redis://localhost:6379/0

# TTL Cache (en secondes)
CACHE_TTL_DEFAULT=300        # 5 minutes
CACHE_TTL_DEBATES=300        # 5 minutes  
CACHE_TTL_STREAMING=3600     # 1 heure
CACHE_TTL_METADATA=86400     # 24 heures

# =============================================================================
# SÉCURITÉ
# =============================================================================
# IMPORTANT: Changer cette clé en production !
SECRET_KEY=change-this-secret-key-in-production-with-a-long-random-string
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Origins (séparés par des virgules)
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:8081

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

# =============================================================================
# CHEMINS DE FICHIERS
# =============================================================================
# Laisser vide pour auto-détection selon l'OS
# Linux: /var/lib/robian-api ou ~/.local/share/robian-api
# macOS: ~/Library/Application Support/robian-api

DATA_DIR=
CACHE_DIR=
AUDIO_DIR=
LOGS_DIR=
DOWNLOADS_DIR=
TEMP_DIR=

# =============================================================================
# AUDIO ET EXTRACTION
# =============================================================================
# yt-dlp settings
YTDLP_FORMAT=bestaudio/best
YTDLP_EXTRACT_FLAT=false
YTDLP_NO_PLAYLIST=true

# FFmpeg (laisser vide pour auto-détection)
FFMPEG_BINARY=
AUDIO_FORMAT=mp3
AUDIO_QUALITY=192k
AUDIO_CODEC=libmp3lame

# Limites de processing
MAX_CONCURRENT_EXTRACTIONS=3
EXTRACTION_TIMEOUT=1800      # 30 minutes
MAX_FILE_SIZE_MB=500

# =============================================================================
# MONITORING ET LOGGING
# =============================================================================
LOG_FORMAT=json             # json ou text
LOG_ROTATION=true
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# Métriques Prometheus
ENABLE_METRICS=true
METRICS_PORT=9090

# Health checks
HEALTH_CHECK_INTERVAL=30

# Profiling (développement uniquement)
ENABLE_PROFILING=false

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_PREFIX=/api
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json

# =============================================================================
# CELERY (TÂCHES ASYNCHRONES)
# =============================================================================
# Celery utilise la configuration Redis par défaut
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# =============================================================================
# CONFIGURATION SPÉCIFIQUE LINUX
# =============================================================================
# Si déployé sur Linux en tant que service système
# USER=robian-api
# GROUP=robian-api

# =============================================================================
# CONFIGURATION DOCKER
# =============================================================================
# Variables pour docker-compose
COMPOSE_PROJECT_NAME=robian-api
DOCKER_REGISTRY=
DOCKER_TAG=latest

# =============================================================================
# ASSEMBLÉE NATIONALE API (si applicable)
# =============================================================================
# Si l'AN fournit une API officielle à l'avenir
AN_API_BASE_URL=https://api.assemblee-nationale.fr
AN_API_KEY=
AN_API_RATE_LIMIT=60

# =============================================================================
# NOTIFICATIONS (optionnel)
# =============================================================================
# Email notifications
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=true

# Webhook notifications
WEBHOOK_URL=
WEBHOOK_SECRET=

# =============================================================================
# DÉVELOPPEMENT LOCAL
# =============================================================================
# Variables spécifiques au développement
DEV_FORCE_REFRESH_CACHE=false
DEV_MOCK_EXTRACTION=false
DEV_SKIP_AUTH=false
